# TabHere Roadmap / TODO

> 目标：在不牺牲隐私与轻量体验的前提下，逐步提升补全相关性、兼容性和个性化能力。

---

## v0.1.x（当前/维护）

- [x] 全站输入补全（input/textarea/contenteditable）
- [x] 防抖 + 乱序保护 + 后缀式补全
- [x] 独立浮层展示补全（不侵入输入框）
- [x] 可配置快捷键与站点白/黑名单
- [x] i18n（EN / zh_CN）
- [ ] 兼容性小修：常见富文本编辑器（X/Slack/Notion/Gmail 等）边界案例收集与修复
- [ ] Overlay 定位/滚动/缩放在复杂布局下的稳健性（sticky/transform/zoom/iframe）

---

## v0.2（上下文关联增强）

### 更丰富的网页内上下文

- [ ] 可选发送 **页面标题/URL**（再次引入，但默认关闭）  
      - UI 中明确提示隐私含义  
      - 仅在用户开启时附加到 prompt
- [ ] 输入框邻近上下文抓取（可配置开关）：  
      - 输入框附近可见文本（例如 label、placeholder、最近的段落/标题）  
      - 表单字段名/描述（如“收件人/主题/正文”）
- [ ] 面向对话类页面的“线程上下文”：  
      - 识别 chat UI（如推文回复、评论区、客服对话）  
      - 抓取最近 N 条消息作为补全参考（本地仅短期缓存）
- [ ] 多语言/方向识别更可靠：  
      - 自动判断语言与书写方向（LTR/RTL）  
      - prompt 中显式约束输出语言一致

### Prompt 策略

- [ ] 站点级 prompt 模板（内置少量常见站点策略 + 用户自定义）
- [ ] “短输入不调用 / 长输入分段调用”策略优化（降低成本）
- [ ] 结果后处理：去重、去前缀回声、裁剪到合理长度

---

## v0.3（用户个性化与持久化记忆）

> 仅在用户明确同意的前提下启用，默认关闭。

### 个性化偏好

- [ ] 用户“写作风格偏好”配置：  
      - 语气（正式/随意/幽默）  
      - 长度偏好（短/中/长）  
      - 语言/术语偏好
- [ ] 站点/场景级偏好覆盖（例如工作邮箱 vs 社交媒体）

### 持久化记忆（本地优先）

- [ ] 本地记忆库：记录用户确认过的补全/常用短语（按域名/语言分桶）
- [ ] 轻量检索：  
      - 关键词匹配  
      - 可选本地 embedding（WebGPU/wasm 或轻量模型）  
      - 在 prompt 中作为“建议参考”注入
- [ ] 记忆管理 UI：  
      - 查看/编辑/一键清空  
      - 导出/导入（JSON）
- [ ] 隐私保护：  
      - 明确声明“记忆仅存本地、不上传”  
      - 支持“仅会话记忆（tab 生命周期）”

---

## v0.4（体验升级）

- [ ] Streaming 流式补全（逐字出现，更像 IDE）
- [ ] 多候选补全（上下键切换 / Tab 接受）
- [ ] 退避与速率限制可视化提示（避免误触高成本）
- [ ] 性能剖析与缓存：同前缀短期缓存、节省重复请求

---

## v0.5（生态与高级能力）

- [ ] “规则/插件”机制：用户可对特定站点写简单策略（匹配域名 + prompt 模板）
- [ ] 团队/企业模式：统一配置分发（仍保持 Key 归属用户/组织）
- [ ] 可选云同步记忆（需要单独隐私协议与审核；默认关闭）

---

## 持续事项（长期）

- [ ] 兼容性回归测试：维护一批典型站点用例
- [ ] 安全/隐私审计：权限最小化、数据披露透明
- [ ] 成本控制：模型选择建议、token 预算、提示用户消耗
- [ ] UI/可访问性：高对比度模式、键盘友好

